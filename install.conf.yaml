- defaults:
    link:
      relink: true
      force: true

- clean: ['~']

- link:
    ~/.zshrc: zshrc
    ~/.starship.toml:
      if: '[ "${CODESPACES}" = true ]'
      path: starship.toml
      force: true
    ~/.oh-my-zsh/custom/common.zsh:
      path: oh-my-zsh/custom/common.zsh
    ~/.oh-my-zsh/custom/codespace.zsh:
      if: '[ "${CODESPACES}" = true ]'
      path: oh-my-zsh/custom/codespace.zsh
    ~/.oh-my-zsh/custom/macos.zsh:
      if: '[ `uname` = Darwin ]'
      path: oh-my-zsh/custom/macos.zsh

- create:
    - ~/downloads

- shell:
  - [git submodule update --init --recursive, Installing submodules]
  -
    command: scripts/common-init.sh
    stdout: true
    stderr: true
    description: "Running common init..."
  -
    command: scripts/codespace-init.sh
    stdout: true
    stderr: true
    description: "Running codespace init (if applicable)..."
  -
    command: scripts/macos-init.sh
    stdout: true
    stderr: true
    description: "Running macOS init (if applicable)..."
